#+TITLE: EE330 Lab #3
#+SUBTITLE: Investigating Bipolar Junction Transistor Characteristics
#+AUTHOR: Jaap de Dood
#+DATE: Oct. 14, 2017
#+OPTIONS: toc:nil
#+OPTIONS: tex:t
#+LaTeX_HEADER:\usepackage[margin=1.0in]{geometry}
* Abstract
This lab was an introduction to working with bipolar junction transistors (BJTs) by seeing how to find their pin out using a digital multimeter and using their datasheets. Next, important characteristics of BJTs were measured and investigated. First, the variation between devices of the same type was measured and the relationship between I_C and \beta was investigated. Next, the relationship between V_{CE} and I_C at constant I_B were measured and plotted and the effect of varying temperature was measured. The \beta value for a transistor in inverted mode was then measured to compare to active mode, as well as the zener voltage for this B-E junction. Finally, I_{CEO} was measured at room temperature and a high temperature.
* Introduction
A bipolar junction transistor consists of three layers of differently doped semiconductor material. Depending on whether it is an "npn" or "pnp" type transistor, these layers will be n-type, p-type, n-type or p-type, n-type, p-type respectively, which are given the names collector, base and emitter. This can be modeled as two diodes, pointing either outward, for npn, or inward, for pnp, from the base. The emitter is usually also heavily doped to facilitate collector-emitter diffusion of carriers. These properties can be used to experimentally determine whether a given BJT is npn or pnp, and which pins correspond to base, collector and emitter.\newline\newline
The pin out for a BJT can be determined by applying a voltage to the pins and measuring the voltage drop across the junction. Almost all modern multimeters have a "diode test" setting that is very convenient for testing diodes and transistors. The "resistance" function of a multimeter will usually not return any readings when measuring across a p-n junction as it requires about 0.7V to forward bias a silicon p-n junction and the resistance setting will not provide this. The diode test setting, instead, provides a high enough voltage to forward bias the junction and reads the voltage drop across it. The collector can then be distinguished from the emitter if there is a difference between V_{BE} and V_{BC}, as V_{BE} will be slightly higher due to the heavy doping.\newline\newline
Although the pin out can be determined experimentally, it could also simply be read from the device's data sheet. Manufacturer data sheets are easy to find online and contain most of the information one may need to know about the device. This includes maximum ratings, typical values etc. Although the manufacturer measures these values with highly accurate techniques, they all include a, possibly significant, error margin as not every device can be manufactured to be identical. Some of these values will be noted from the data sheet and compared to a measured value in this lab.\newline\newline
One of these values that can be found in the data is \beta, which is the transistor's dc current gain given by 
\begin{equation}
\beta = \frac{I_C}{I_B}
\end{equation}
This is one of the most important characteristics of a BJT as they are widely used as amplifiers, however, one complication is that \beta varies with I_C and temperature. The manufacturer of the BJT that will be used in this lab, a 2N3904 NPN transistor, includes a characterization of this effect in the device's data sheet:
#+CAPTION: DC Current Gain
#+ATTR_LATEX: :float nil
file:image1.jpg
This effect will be measured in the lab and compared to the given values by the manufacturer.\newline\newline
Another relationship that will be measured, I_C vs V_{CE}, is the relationship caused by an effect known as base width modulation, or the Early effect. As V_{CE} is increased, the base-collector voltage increases too, so it is increasingly reverse biased. Increasing reverse bias on this junction increases the width of the depletion region which ,in turn, mostly reduces the width of the base region as it is lightly doped compared to the collector. This increases both the concentration gradient and reduces the probability for recombination, leading to a higher rate of diffusion and a higher \beta value and thus a higher emitter current and collector current.\newline\newline
At a certain V_{CE} however, the base width approaches zero, effectively shorting the transistor and possibly destroying it by reaching high currents. This is called punchthrough or reach through and will also be measured.\newline\newline
When a V_{CE} is applied to a transistor with the base left unconnected or "open," there will still be some current through the transistor, just like there would be a leakage current through a reverse biased diode. Also similar to a diode, this reverse leakage current will increase with temperature. In some transistor circuits this could be a real issue if the current is high enough, so an I_{CEO} value will be measured at a high temperature. 
* Procedure
** Determining pin out experimentally
The base pin of a BJT with a TO-92 style case is usually the center pin, so the most methodical way to use the diode test setting on a multimeter with a BJT is to place either of the leads on the center pin and then touch the other two pins with the other lead in turn. If no value is read then swap the leads. If the center pin is the base pin, then in one of these two tests a volage drop will be read across both pins. If a voltage drop is recorded while touching the base pin with the positive lead then the transistor is npn or vice-versa pnp. If touching only one of the pins with the second lead produces a reading, then the first lead is not touching the base and the process should be repeated by trying another pin as the base pin.\newline\newline
The values read will tell us whether the transistor is made of silicon or germanium, and may tell us which is the collector and which is the emitter. A silicon p-n junction will drop around 0.7V and germanium around 0.3V. V_{BE} will drop a slightly higher voltage than V_{BC}. \newline\newline
This will be done for 3 different BJTs.
** Measuring \beta for different transistors of the same number and \beta vs I_C
In order to measure \beta for multiple transistors of the same number, I_C and V_{CE} are kept constant at 1mA and 11V in the following circuit.
#+ATTR_LATEX: :width 100px :float nil
#+CAPTION: Constant I_C and V_{CE}
file:image2.jpg
Two 2N3904, 2N3906 and 2N3089 BJTs will be placed in this circuit and \beta can then be calculated by equation (1) and the % difference with the datasheet values can be calculated by: 
\begin{equation}
\text{Percentage error} = \frac{\text{Theoretical Value} - \text{Measured Value}}{\text{Theoretical Value}} \cdot 100\%
\end{equation}
Next, using just the 2N3904 transistor, I_C will be varied from 10\mu A to 100mA in log units by varying the voltage, R1 and R2 and I_B is measured each time.
** Measuring I_C vs V_{CE}
Using the same 2N3904 from before, I_B will now be kept constant at 1\mu A and V_{CE} is to be varied over a range of 2V to 22V. Since a very large resistance would be required for R2 in figure 1 to obtain 1\mu A at 22V, a separate power supply was used to supply the base current in this experiment.
#+ATTR_LATEX: :width 100px :float nil
#+CAPTION: Constant I_B varying V_{CE}
file:image3.jpg
With a small resistor in series and a very low base current, almost all the input voltage will be dropped across the transistor. The exact input voltage required for a certain V_{CE} could be calculated, however, for this experiment there is no need to since exact values are not required; as long as we obtain enough measured samples between 2 and 22V. The 100\Omega resistor in figure 3 is just in case the transistor was to begin conducting a large current, to protect the transistor and the power supply. \newline\newline
With this circuit set up, V_{CE} will be varied over our range and I_C measured every time. Then, the Early potential, V_A can be predicted by extrapolating the plotted graph of I_C vs V_{CE} until it intersects the V_{CE} axis.\newline\newline
In order to take a measurement of \beta at different temperatures, the transistor can be cooled to about -55 C by spraying it with a freezer spray and heated to roughly +125 C by setting a soldering iron to its lowest temperature and touching one of the leads with the iron tip. When doing this it is important to make sure the lead that will be touched by the soldering iron is not inserted into a breadboard, as the heat will conduct through the pin and melt the plastic breadboard. Instead, a pin should be bent up away from the breadboard before it is touched with the soldering iron. A measuremenmt for I_C can then quickly be taken while the transistor is still hot or cold.
** Measuring \beta and B-E zener voltage in inverted mode
While the circuit in figure 3 is set up, the transistor can be flipped in direction, to place it in inverted mode and observe the effect on \beta while keeping I_B = 1\mu A and V_{CE} = 10V. The zener voltage is then measured by increase V_CE until a large increase in I_C is seen at which point V_CE is the zener voltage.
** Measuring I_CEO, I_CBO
In order to measure the "open" currents, the base of the transistor in the circuit from figure 3 needs to simply be disconnected from the circuit and the currents across the base and emitter can be measured with an ammeter as before. If the leakage current is too small to read by the ammeter, a small resistor can be placed before the collector or after the base and the voltage across it measured by a voltmeter. The current can then be calculated by \(I = \frac{V}{R}\).
* Results
** Determining pin out
| Transistor | Type | V_{pin 21} | V_{pin 23} | pin out |
|------------+------+------------+------------+---------|
| 2N3904     | NPN  |      0.700 |      0.680 | EBC     |
| 2N3906     | PNP  |      0.700 |      0.680 | EBC     |
| 2N5089     | NPN  |      0.700 |      0.700 | EBC     |

** Primary Characteristics for a 2N3904
#+ATTR_LATEX: :width 100px :float nil
#+CAPTION: pin out and transistor type
file:image4.jpg
#+ATTR_LATEX: :width 300px :float nil
#+CAPTION: Maximum ratings
file:image5.jpg
#+ATTR_LATEX: :width 500px :float nil
#+CAPTION: \beta / h_fe range of values
file:image6.jpg
** Measuring \beta for different transistors of the same number and \beta vs I_C
#+ATTR_LATEX: :float nil
#+CAPTION: \beta for different transistors of same number
| Transistor | I_C  (mA) | I_B (\mu A) | \beta | % difference |
|------------+-----------+-------------+-------+--------------|
| 2N3904 #1  |     1.063 |        6.96 | 152.7 |              |
| 2N3904 #2  |     1.063 |        6.97 | 152.5 |         0.14 |
| 2N3906 #1  |     1.198 |        8.04 | 149.0 |              |
| 2N3909 #2  |     1.119 |        8.10 | 138.1 |         7.29 |
| 2N3089 #1  |     1.009 |        6.73 | 149.9 |              |
| 2N3089 #2  |     1.080 |        7.07 | 152.8 |         1.89 |
#+ATTR_LATEX: :float nil
#+CAPTION: \beta vs I_C for a 2N3904 transistor
|     I_C (A) |     I_B (A) | \beta |
|-------------+-------------+-------|
| 1.14x10^-05 | 5.00x10^-08 |   228 |
| 1.01x10^-04 | 5.40x10^-07 |   186 |
| 1.09x10^-03 | 5.73x10^-06 |   190 |
| 1.50x10^-02 | 5.51x10^-05 |   272 |
| 1.03x10^-01 | 1.97x10^-03 |  52.2 |
#+ATTR_LATEX: :float nil
#+CAPTION: Cooling effect on \beta
| Temperature ( \(^{\circ}\) C) | I_C (mA) | I_B (\mu A) | V_{BE} | \beta |
|-------------------------+----------+-------------+--------+-------|
|                      ~25 |     0.88 |         4.3 |  0.663 | 204.7 |
|                     ~-50 |     0.89 |       8.181 |  0.850 | 108.8 |
#+ATTR_LATEX: :width 300px :float nil
#+CAPTION: \beta vs I_C for a 2N3904 transistor plot
file:image7.png
** Measuring I_C vs V_{CE}
#+ATTR_LATEX: :float nil
#+CAPTION: V_CE vs I_C for a 2N3904 transistor
| V_CE | I_C (mA) |
|------+----------|
|    2 |    0.189 |
|  5.2 |    0.192 |
|  9.5 |    0.196 |
|   13 |    0.198 |
| 15.3 |      0.2 |
| 19.9 |    0.203 |
|   24 |    0.205 |
#+ATTR_LATEX: :width 300px :float nil
#+CAPTION: V_CE vs I_C plot
file:image8.jpg
#+ATTR_LATEX: :width 500px :float nil
#+CAPTION: Early Voltage Extrapolation
file:image9.jpg
** Measuring \beta and B-E zener voltage in inverted mode
#+ATTR_LATEX: :float nil
#+CAPTION: 2N3904 in reverse bias
| V_CE |   I_C (A) |     I_B (A) | \beta |
|------+-----------+-------------+-------|
| 2.02 | 1.8x10^-6 | 1.057x10^-6 |   1.7 |
| 5.12 | 1.9x10^-6 | 1.057x10^-6 |   1.8 |
| 8.9+ | breakdown |             |       |
** Measuring I_CEO
#+ATTR_LATEX: :float nil
#+CAPTION: 2N3904 with base unconnected
| Temperature ( \(^{\circ}\) C) | V_R (mV) | I_CEO (nA) |
|-------------------------+----------+------------|
| ~25                     |    0.005 |         50 |
| ~125                    |    0.035 |        350 |
* Discussion
The results in Table 1 show that there is variation in the \beta values of multiple transistors of the same number. The datasheet for a 2N3904 shows, in Figure 5, that the \beta values can be anywhere between 70 and 300 at 1.0mA so the % difference of 0.14% for the two transistors is very low compared to what it could be. In specifically low toleranceo applications, these variations in values could be dealt with by designing the circuit to be relatively independent from \beta, or by testing a batch of the same transistors and selecting those with similar values.\newline\newline

The plot in Figure 7 is expected to look more like the curve in Figure 1, however, the value for \beta at I_C = 10\mu A is much higher than it should be and, in hindsight, should be re-measured to produce an accurate plot. The expected drop in \beta at higher current values can still clearly be seen as \beta reaches a value of 52.2 at I_C = 100mA. This drop in \beta is due to effects known as current crowding, high level injection and bulk resistance. High level injection effect occur when high currents cause an excess minority carrier concentration exceeding the doping density of the material. At this point the ideal diode equation no longer holds across the p-n junctions of the transistor. The other two high-current effects are due to the small area of the base region. Because we know that \(R = \frac{\rho}{A}\), a small area means a larger resistance. This resistance causes the current to crowd along the edges of the emitter-base junction when a large forward bias is applied, restricting the current flow.\newline\newline

When the package was cooled using some freeze spray, \beta saw a drop from 204.7 to 108.8. Looking at Figure 1, \beta is expected to be
\[\beta_{25C} \cdot \frac{0.41}{0.79} = 0.52\beta_{25C} = \beta_{-55C}\]
Using our measured \beta at room temperature:
\[\beta_{-55C}=204.7\cdot 0.52 = 106.44\]
So our measured value is a 2.2% difference from the expected value. This difference could be lower if the temperature was measured accurately and plotted against current measured by a DMM with a high refresh rate.\newline\newline

The results for measuring I_C vs V_CE in Table 3 and Figure 8 are exactly as expected. This is because at V_CE = 2-25V, the transistor will be in active mode with a small base current. If V_CE falls below a certain point, the transistor would quickly reach saturation at which point it acts non-linearly and could reach high power values and break down from the heat. This is the reason for the 100\Omega resistor in the circuit as described in part 3.3. In active mode, a BJT's current increases linearly with voltage as shown in the graph. This is the region that is useful for amplification purposes as the results are easily predicted and adjusted.\newline\newline

If this slightly positive slope of V_CE vs I_C is extrapolated to the negative end of the graph, the intersection point with the x-axis is -V_A. This is know as the Early potential and represents how closely to ideal the transistor behaves. In an ideal transistor, I_C does not depend on V_CE and hence \(V_A = \infty\) but this is not true in reality as seen in this experiment where we measured a V_A of 250V.\newline\newline

In the next part of the experiment, the same transistor, a 2N3904, was turned around to exchange the emitter for the collector and vice-versa. Table 5 shows much lower \beta values than measured before. This is because a transistor is not symmetrical since the emitter is heavily doped and the collector lightly doped. The emitter is heavily doped to facilitate diffusion current in forward active mode, hence the transistor will have poor amplification in reverse active mode. As seen with diodes, applying a reverse bias to a p-n junction increases the depletion width. At a certain reverse bias, the base-collector and base-emitter depletion widths increase enough to deplete the entire base region, allowing carriers to pass it without recombining. For our transistor, this breakdown voltage was measured at 8.9V. The datasheet states the maximum V_EB as being 6.0V, but this includes a safe margin accounting for variation in individual transistor properties.\newline\newline

When the base of the transistor was disconnected, very small 
