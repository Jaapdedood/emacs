#+TITLE: Controlled Heatsink Wi-Fi Greenhouse
#+SUBTITLE: An Experiment in Sustainable Energy
#+AUTHOR: Jaap de Dood
#+DATE: June 6, 2017
* Introduction
The initial goal of this project was to make an Internet of Things
(IoT) project in the form of a Wi-Fi greenhouse. While doing research
on greenhouse technology I stumbled upon a [[https://www.youtube.com/watch?v=VJRrjxOcA9I][Youtube clip]] of the BBC
show "It's Not Easy Being Green" in which a greenhouse is displayed
that uses an insulated box of soil buried underground as a heatsink to
maintain the temperature in the greenhouse constant. Whether it worked
or not was not shown and I was only able to find one or two other
examples of a similar system online, both poorly executed.  This
greenhouse is intended as an experiment to test if such a system would
provide sufficient heating and cooling to maintain optimal temperature
for plant growth. Additionally it will be an project in electronics as
a combination of microcontrollers will be used to data log various
environmental variables and allow the greenhouse to be monitored over
wifi.
* Literature


* Initial Design
[[file:greenhouse.jpg]]
Rough design.


Ideas gathered at later stage:
 - Polystyrene cooler box filled with water as thermal mass.
 - Polystyrene roof (low cost).
 - 2x4s on corners to glue glass onto for improved structure.
 - LCD display to display sensor readings.

* Parts List
1. Arduino Uno
2. ESP8266 Wi-Fi development board 
3. BC547 NPN transistor x Number
4. Various diodes
5. Various capacitors
6. PC817 Octocoupler x Number
7. 3m silicon air pump tube
8. 12V water pump
9. 12V air pump
10. MQ-135 gas detection module
11. Various resistors
12. 22AWG green wire (ESW colors)
13. 5528 LDR x 1
14. Brandless soil moisture sensor (analog or digital output)
15. 12V waterproof grow light
16. DHT22 temp/humidity sensor
17. DS1307 real time clock module
18. 18"x24" glass x 4
19. Polystyrene cooler box
20. 2x4x24" stud x 4
21. Polystyrene board

* Controller Layout

From the parts list above, 9 items require I/O from the microcontroller hence it needs to be examined whether the NodeMCU ESP8266 has sufficient capabilities.

1. 3m silicon air pump tube - 1 digital output
2. 12V water pump - 1 digital output
3. 12V air pump - 1 digital output
4. MQ-135 gas detection module - 1 analog/digital input
5. 5528 LDR x 1 - 1 analog input
6. Brandless soil moisture sensor - 1 digital output 1 digital input
7. 12V waterproof grow light - 1 digital output
8. DHT22 temp/humidity sensor - 1 digital input
9. DS1307 real time clock module - 2 digital input**

This adds up to 9 digital I/O and 1 analog input. The ESP8266 should be able to handle this.

** RTC may not be necessary. There are 3 options for timing:
1. RTC
2. Sofware clock using millis()
3. Internet time (?)

Using an RTC initially seemed like the simplest option but would take up 2 GPIO pins and the following videos make using NTP time attractive.
Andreas Spiess: Exact Time without RTC Module for the ESP8266: NTP Time - https://www.youtube.com/watch?v=qzkNXhubWLg
Andreas Spiess: Schedule a daily task at exact the same time with the ESP8266. The rest is deepsleep https://www.youtube.com/watch?v=BzFM3PWx1rg




